# AUTOMATICALLY GENERATED - DO NOT EDIT
# Generated by remnawave-ansible-gen
#
# Example: Check mode (dry-run) demonstration
# Shows how to preview changes without actually making them
# Usage: ansible-playbook check_mode.yml -e @../vars/example_vars.yml
---
- name: Check Mode Demonstration
  hosts: localhost
  gather_facts: false
  vars_files:
    - ../vars/example_vars.yml

  collections:
    - remnawave.panel

  tasks:
    # =========================================
    # Check Mode Examples
    # =========================================

    - name: Preview config profile creation (check mode)
      remnawave.panel.config_profile:
        api_url: "{{ '{{' }} remnawave_api_url {{ '}}' }}"
        api_token: "{{ '{{' }} remnawave_api_token {{ '}}' }}"
        state: present
        name: "Check Mode Test Profile"
        config: "{{ '{{' }} xray_config {{ '}}' }}"
      check_mode: true
      register: profile_check

    - name: Display check mode result for profile
      ansible.builtin.debug:
        msg:
          - "Would change: {{ '{{' }} profile_check.changed {{ '}}' }}"
          - "Diff before: {{ '{{' }} profile_check.diff.before | default({}) {{ '}}' }}"
          - "Diff after: {{ '{{' }} profile_check.diff.after | default({}) {{ '}}' }}"

    - name: Preview node creation (check mode)
      remnawave.panel.node:
        api_url: "{{ '{{' }} remnawave_api_url {{ '}}' }}"
        api_token: "{{ '{{' }} remnawave_api_token {{ '}}' }}"
        state: present
        name: "Check Mode Test Node"
        address: "10.0.0.100"
        port: 443
        config_profile:
          active_config_profile: "{{ '{{' }} config_profile_name {{ '}}' }}"
          active_inbound_tags:
            - "MainInbound"
      check_mode: true
      register: node_check

    - name: Display check mode result for node
      ansible.builtin.debug:
        msg:
          - "Would change: {{ '{{' }} node_check.changed {{ '}}' }}"
          - "Diff before: {{ '{{' }} node_check.diff.before | default({}) {{ '}}' }}"
          - "Diff after: {{ '{{' }} node_check.diff.after | default({}) {{ '}}' }}"

    # =========================================
    # Check Mode with Diff
    # =========================================

    - name: Check mode summary
      ansible.builtin.debug:
        msg:
          - "Check mode allows you to preview changes before applying them."
          - "Use --check flag when running playbooks: ansible-playbook playbook.yml --check"
          - "Use --diff flag to see detailed differences: ansible-playbook playbook.yml --check --diff"
