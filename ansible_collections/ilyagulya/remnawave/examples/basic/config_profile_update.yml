# AUTOMATICALLY GENERATED - DO NOT EDIT
# Generated by remnawave-ansible-gen
#
# Example: Update a Config Profile
# Usage: ansible-playbook config_profile_update.yml -e @../vars/example_vars.yml
---
- name: Update Config Profile
  hosts: localhost
  gather_facts: false
  vars_files:
    - ../vars/example_vars.yml

  tasks:
    - name: Update config profile
      ilyagulya.remnawave.config_profile:
        api_url: "{{ remnawave_api_url }}"
        api_token: "{{ remnawave_api_token }}"
        state: present
        name: "{{ config_profile_name }}"
        # Update with modified config (e.g., changed log level)
        config:
          {
            "log": {
              "loglevel": "warning"
            },
            "inbounds": [
              {
                "tag": "MainInbound",
                "port": 10000,
                "protocol": "shadowsocks",
                "settings": {
                  "clients": [],
                  "network": "tcp,udp"
                },
                "sniffing": {
                  "enabled": true,
                  "destOverride": ["http", "tls"]
                }
              }
            ],
            "outbounds": [
              {
                "tag": "DIRECT",
                "protocol": "freedom"
              }
            ],
            "routing": {
              "rules": []
            }
          }
      register: result

    - name: Display result
      ansible.builtin.debug:
        var: result
